"use strict";(self.webpackChunk_arizeai_point_cloud=self.webpackChunk_arizeai_point_cloud||[]).push([[334],{"./src/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Y5:()=>Axes,d2:()=>Cluster,OE:()=>ColorSchemes,B8:()=>LassoSelect,ON:()=>Points,Rm:()=>ThreeDimensionalBounds,WU:()=>ThreeDimensionalCanvas,GP:()=>ThreeDimensionalControls,rC:()=>TwoDimensionalBounds,iF:()=>TwoDimensionalCanvas,_G:()=>TwoDimensionalControls,dV:()=>getThreeDimensionalBounds,DN:()=>getTwoDimensionalBounds});var react=__webpack_require__("./node_modules/react/index.js"),react_three_fiber_esm=__webpack_require__("./node_modules/@react-three/fiber/dist/react-three-fiber.esm.js");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _defineProperty(obj,key,value){return(key=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==_typeof(i)?i:i+""}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function TwoDimensionalCanvas(_ref){var children=_ref.children,camera=_ref.camera;return react.createElement(react_three_fiber_esm.Hl,{orthographic:!0,camera:_objectSpread({position:[0,0,1],zoom:1,up:[0,1,0]},camera)},children)}var MapControls=__webpack_require__("./node_modules/@react-three/drei/core/MapControls.js"),DEFAULT_FALLBACK_BOUNDS={minX:0,maxX:0,minY:0,maxY:0};function getTwoDimensionalBounds(points,options){if(0===points.length)return(null==options?void 0:options.fallbackBounds)||DEFAULT_FALLBACK_BOUNDS;var minX=1/0,minY=1/0,maxX=-1/0,maxY=-1/0;return points.forEach((function(p){minX=Math.min(minX,p[0]),minY=Math.min(minY,p[1]),maxX=Math.max(maxX,p[0]),maxY=Math.max(maxY,p[1])})),{minX,maxX,minY,maxY}}var threeDimensionalUtils_DEFAULT_FALLBACK_BOUNDS={minX:0,maxX:0,minY:0,maxY:0,minZ:0,maxZ:0};function getThreeDimensionalBounds(points,options){if(0===points.length)return(null==options?void 0:options.fallbackBounds)||threeDimensionalUtils_DEFAULT_FALLBACK_BOUNDS;var minX=1/0,minY=1/0,maxX=-1/0,maxY=-1/0,minZ=1/0,maxZ=-1/0;return points.forEach((function(p){minX=Math.min(minX,p[0]),minY=Math.min(minY,p[1]),minZ=Math.min(minZ,p[2]),maxX=Math.max(maxX,p[0]),maxY=Math.max(maxY,p[1]),maxZ=Math.max(maxZ,p[2])})),{minX,maxX,minY,maxY,minZ,maxZ}}function isOrthographicCamera(c){return c.isOrthographicCamera}var index_76c68185_esm=__webpack_require__("./node_modules/@react-three/fiber/dist/index-76c68185.esm.js"),DEFAULT_BOUNDS_ZOOM_PADDING_FACTOR=.9,BoundsContext=(0,react.createContext)({bounds:{minX:-10,maxX:10,minY:-10,maxY:10},center:[0,0]});function TwoDimensionalBounds(_ref){var bounds=_ref.bounds,children=_ref.children,_ref$boundsZoomPaddin=_ref.boundsZoomPaddingFactor,boundsZoomPaddingFactor=void 0===_ref$boundsZoomPaddin?DEFAULT_BOUNDS_ZOOM_PADDING_FACTOR:_ref$boundsZoomPaddin,center=function getCenterFromTwoDimensionalBounds(_ref){var minX=_ref.minX,maxX=_ref.maxX,minY=_ref.minY;return[minX+(maxX-minX)/2,minY+(_ref.maxY-minY)/2]}(bounds),_useThree=(0,index_76c68185_esm.z)(),camera=_useThree.camera,_useThree$size=_useThree.size,width=_useThree$size.width,height=_useThree$size.height;return(0,react.useEffect)((function(){var minX=bounds.minX,maxX=bounds.maxX,minY=bounds.minY,boundsWidth=maxX-minX,boundsHeight=bounds.maxY-minY;camera.translateX(boundsWidth/2+minX),camera.translateY(boundsHeight/2+minY),camera.zoom=Math.min(width/boundsWidth,height/boundsHeight)*boundsZoomPaddingFactor,camera.updateProjectionMatrix()}),[bounds]),react.createElement(BoundsContext.Provider,{value:{bounds,center}},children)}var _excluded=["enabled","zoomSpeed","enableZoom","panSpeed","enablePan"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function TwoDimensionalControls(_ref){var _ref$enabled=_ref.enabled,enabled=void 0===_ref$enabled||_ref$enabled,_ref$zoomSpeed=_ref.zoomSpeed,zoomSpeed=void 0===_ref$zoomSpeed?1.5:_ref$zoomSpeed,_ref$enableZoom=_ref.enableZoom,enableZoom=void 0===_ref$enableZoom||_ref$enableZoom,_ref$panSpeed=_ref.panSpeed,panSpeed=void 0===_ref$panSpeed?2:_ref$panSpeed,_ref$enablePan=_ref.enablePan,enablePan=void 0===_ref$enablePan||_ref$enablePan,passThroughProps=_objectWithoutProperties(_ref,_excluded),center=function useTwoDimensionalBounds(){return(0,react.useContext)(BoundsContext)}().center,target=[].concat(_toConsumableArray(center),[0]);return react.createElement(MapControls.r,_extends({enableRotate:!1,enabled,target,zoomSpeed,enableZoom,panSpeed,enablePan,autoRotate:!1},passThroughProps))}function ThreeDimensionalCanvas_typeof(o){return ThreeDimensionalCanvas_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},ThreeDimensionalCanvas_typeof(o)}var ThreeDimensionalCanvas_excluded=["children","camera","orthographic"];function ThreeDimensionalCanvas_extends(){return ThreeDimensionalCanvas_extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},ThreeDimensionalCanvas_extends.apply(this,arguments)}function ThreeDimensionalCanvas_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function ThreeDimensionalCanvas_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ThreeDimensionalCanvas_ownKeys(Object(t),!0).forEach((function(r){ThreeDimensionalCanvas_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ThreeDimensionalCanvas_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function ThreeDimensionalCanvas_defineProperty(obj,key,value){return(key=function ThreeDimensionalCanvas_toPropertyKey(t){var i=function ThreeDimensionalCanvas_toPrimitive(t,r){if("object"!=ThreeDimensionalCanvas_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=ThreeDimensionalCanvas_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==ThreeDimensionalCanvas_typeof(i)?i:i+""}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function ThreeDimensionalCanvas_objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function ThreeDimensionalCanvas_objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function ThreeDimensionalCanvas(_ref){var children=_ref.children,camera=_ref.camera,_ref$orthographic=_ref.orthographic,orthographic=void 0!==_ref$orthographic&&_ref$orthographic,passThroughProps=ThreeDimensionalCanvas_objectWithoutProperties(_ref,ThreeDimensionalCanvas_excluded);return react.createElement(react_three_fiber_esm.Hl,ThreeDimensionalCanvas_extends({orthographic,camera:ThreeDimensionalCanvas_objectSpread({position:[0,0,1],zoom:1,up:[0,1,0]},camera)},passThroughProps),children)}var OrbitControls=__webpack_require__("./node_modules/@react-three/drei/core/OrbitControls.js"),ThreeDimensionalControls_excluded=["enabled","zoomSpeed","enableZoom","enablePan","enableRotate","autoRotate","autoRotateSpeed"];function ThreeDimensionalControls_extends(){return ThreeDimensionalControls_extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},ThreeDimensionalControls_extends.apply(this,arguments)}function ThreeDimensionalControls_objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function ThreeDimensionalControls_objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function ThreeDimensionalControls(_ref){var _ref$enabled=_ref.enabled,enabled=void 0===_ref$enabled||_ref$enabled,_ref$zoomSpeed=_ref.zoomSpeed,zoomSpeed=void 0===_ref$zoomSpeed?1:_ref$zoomSpeed,_ref$enableZoom=_ref.enableZoom,enableZoom=void 0===_ref$enableZoom||_ref$enableZoom,_ref$enablePan=_ref.enablePan,enablePan=void 0===_ref$enablePan||_ref$enablePan,_ref$enableRotate=_ref.enableRotate,enableRotate=void 0===_ref$enableRotate||_ref$enableRotate,_ref$autoRotate=_ref.autoRotate,autoRotate=void 0!==_ref$autoRotate&&_ref$autoRotate,_ref$autoRotateSpeed=_ref.autoRotateSpeed,autoRotateSpeed=void 0===_ref$autoRotateSpeed?5:_ref$autoRotateSpeed,passThroughProps=ThreeDimensionalControls_objectWithoutProperties(_ref,ThreeDimensionalControls_excluded);return react.createElement(OrbitControls.N,ThreeDimensionalControls_extends({enabled,zoomSpeed,enableZoom,enablePan,enableRotate,autoRotate,autoRotateSpeed},passThroughProps))}function ThreeDimensionalBounds_toConsumableArray(arr){return function ThreeDimensionalBounds_arrayWithoutHoles(arr){if(Array.isArray(arr))return ThreeDimensionalBounds_arrayLikeToArray(arr)}(arr)||function ThreeDimensionalBounds_iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function ThreeDimensionalBounds_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return ThreeDimensionalBounds_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ThreeDimensionalBounds_arrayLikeToArray(o,minLen)}(arr)||function ThreeDimensionalBounds_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ThreeDimensionalBounds_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var ThreeDimensionalBounds_BoundsContext=(0,react.createContext)({bounds:{minX:-10,maxX:10,minY:-10,maxY:10,minZ:-10,maxZ:10},center:[0,0,0]}),ORTHOGRAPHIC_CAMERA_Z_OFFSET=10;function ThreeDimensionalBounds(_ref){var bounds=_ref.bounds,children=_ref.children,_ref$offset=_ref.offset,offset=void 0===_ref$offset?1.5:_ref$offset,_ref$boundsZoomPaddin=_ref.boundsZoomPaddingFactor,boundsZoomPaddingFactor=void 0===_ref$boundsZoomPaddin?.9:_ref$boundsZoomPaddin,center=function getCenterFromThreeDimensionalBounds(_ref){var minX=_ref.minX,maxX=_ref.maxX,minY=_ref.minY,maxY=_ref.maxY,minZ=_ref.minZ;return[minX+(maxX-minX)/2,minY+(maxY-minY)/2,minZ+(_ref.maxZ-minZ)/2]}(bounds),_useThree=(0,index_76c68185_esm.z)(),camera=_useThree.camera,_useThree$size=_useThree.size,width=_useThree$size.width,height=_useThree$size.height;return(0,react.useEffect)((function(){var minX=bounds.minX,maxX=bounds.maxX,minY=bounds.minY,maxY=bounds.maxY,minZ=bounds.minZ,boundsWidth=maxX-minX,boundsHeight=maxY-minY,boundsDepth=bounds.maxZ-minZ,maxDim=Math.max(boundsWidth,boundsHeight,boundsDepth);if(camera.position.x=boundsWidth/2+minX,camera.position.y=boundsHeight/2+minY,isOrthographicCamera(camera)){camera.zoom=Math.min(width/boundsWidth,height/boundsHeight)*boundsZoomPaddingFactor;var furthestPointDim=function getMaxDimensionFromThreeDimensionalBounds(_ref2){var minX=_ref2.minX,maxX=_ref2.maxX,minY=_ref2.minY,maxY=_ref2.maxY,minZ=_ref2.minZ,maxZ=_ref2.maxZ;return Math.max(Math.abs(minX),Math.abs(maxX),Math.abs(minY),Math.abs(maxY),Math.abs(minZ),Math.abs(maxZ))}(bounds),cameraZ=Math.abs(furthestPointDim)+ORTHOGRAPHIC_CAMERA_Z_OFFSET;camera.position.z=cameraZ;var cameraToFarEdge=Math.max(camera.far,cameraZ+furthestPointDim+ORTHOGRAPHIC_CAMERA_Z_OFFSET);camera.far=cameraToFarEdge}else{var fov=camera.fov*(Math.PI/180),_cameraZ=maxDim/(2*Math.tan(fov/2));camera.position.z=(_cameraZ+center[2])*offset;var _cameraToFarEdge=minZ<0?-minZ+camera.position.z:camera.position.z-minZ;camera.far=3*_cameraToFarEdge}camera.updateProjectionMatrix(),camera.lookAt.apply(camera,ThreeDimensionalBounds_toConsumableArray(center))}),[bounds]),react.createElement(ThreeDimensionalBounds_BoundsContext.Provider,{value:{bounds,center}},children)}var three_module=__webpack_require__("./node_modules/three/build/three.module.js"),Axes=function Axes(_ref){var size=_ref.size,_ref$color=_ref.color,color=void 0===_ref$color?"#ffffff":_ref$color,ref=(0,react.useRef)(null);return(0,react.useEffect)((function(){if(ref.current){var colorObj=new three_module.Color(color);ref.current.setColors(colorObj,colorObj,colorObj)}}),[color]),react.createElement("axesHelper",{ref,args:[size]})},defaultPointMeshProps={color:"blue",scale:1},tempObject=new three_module.Object3D,tempColor=new three_module.Color;function Points(_ref){var data=_ref.data,_ref$pointProps=_ref.pointProps,pointProps=void 0===_ref$pointProps?defaultPointMeshProps:_ref$pointProps,onPointsClicked=_ref.onPointsClicked,onPointClicked=_ref.onPointClicked,onPointHovered=_ref.onPointHovered,_onPointerLeave=_ref.onPointerLeave,_ref$pointShape=_ref.pointShape,pointShape=void 0===_ref$pointShape?"sphere":_ref$pointShape,_ref$opacity=_ref.opacity,opacity=void 0===_ref$opacity?1:_ref$opacity,_ref$material=_ref.material,material=void 0===_ref$material?"meshMatcap":_ref$material,getColorPoint=(0,react.useCallback)((function(data){return"function"==typeof pointProps.color?pointProps.color(data):pointProps.color}),[pointProps.color]),colorArray=(0,react.useMemo)((function(){return Float32Array.from(new Array(data.length).fill(null).flatMap((function(_,idx){return tempColor.set(getColorPoint(data[idx])).toArray()})))}),[data]),meshRef=(0,react.useRef)(null);(0,index_76c68185_esm.A)((function(){data.forEach((function(_ref2,id){var position=_ref2.position;if(tempObject.position.set(position[0],position[1],position[2]||0),pointProps.scale&&tempObject.scale.set(pointProps.scale,pointProps.scale,pointProps.scale),meshRef.current){meshRef.current.setMatrixAt(id,tempObject.matrix),meshRef.current.instanceMatrix.needsUpdate=!0;var colorString=getColorPoint(data[id]);tempColor.set(colorString),tempColor.toArray(colorArray,3*id),meshRef.current.geometry.attributes.color.needsUpdate=!0,tempObject.updateMatrix(),meshRef.current.setMatrixAt(id,tempObject.matrix)}}))}));var geometryEl=(0,react.useMemo)((function(){switch(pointShape){case"sphere":return react.createElement("sphereGeometry",{args:[pointProps.radius||.02,20,20]},react.createElement("instancedBufferAttribute",{attach:"attributes-color",args:[colorArray,3]}));case"cube":var args="number"==typeof(null==pointProps?void 0:pointProps.size)?[pointProps.size,pointProps.size,pointProps.size]:[.03,.03,.03];return react.createElement("boxGeometry",{args},react.createElement("instancedBufferAttribute",{attach:"attributes-color",args:[colorArray,3]}));case"octahedron":return react.createElement("octahedronGeometry",{args:[pointProps.radius||.02,0]},react.createElement("instancedBufferAttribute",{attach:"attributes-color",args:[colorArray,3]}));default:throw new Error("Unsupported point shape: ".concat(pointShape))}}),[pointShape,pointProps]),materialEl=(0,react.useMemo)((function(){return"meshMatcap"===material?react.createElement("meshMatcapMaterial",{vertexColors:!0,opacity,transparent:opacity<1}):react.createElement("meshStandardMaterial",{vertexColors:!0,opacity,transparent:opacity<1})}),[material]);return react.createElement("instancedMesh",{args:[void 0,void 0,data.length],ref:meshRef,onPointerUp:function onPointerUp(e){if(e.intersections){var instanceIds=e.intersections.map((function(e){return null==e?void 0:e.instanceId})).filter((function(i){return null!=i}));onPointsClicked&&onPointsClicked(instanceIds.map((function(i){return data[i]}))),instanceIds.length>0&&onPointClicked&&onPointClicked(data[instanceIds[0]])}},onPointerOver:function onPointerOver(e){if(e.intersections){var instanceIds=e.intersections.map((function(e){return null==e?void 0:e.instanceId})).filter((function(i){return null!=i}));instanceIds.length>0&&onPointHovered&&onPointHovered(data[instanceIds[0]])}},onPointerLeave:function onPointerLeave(){_onPointerLeave&&_onPointerLeave()}},geometryEl,materialEl)}var BufferGeometryUtils=__webpack_require__("./node_modules/three-stdlib/utils/BufferGeometryUtils.js"),DEFAULT_RADIUS=.1;function Cluster(_ref){var data=_ref.data,_ref$pointRadius=_ref.pointRadius,pointRadius=void 0===_ref$pointRadius?DEFAULT_RADIUS:_ref$pointRadius,_ref$color=_ref.color,color=void 0===_ref$color?"#999999":_ref$color,_ref$opacity=_ref.opacity,opacity=void 0===_ref$opacity?.2:_ref$opacity,_ref$wireframe=_ref.wireframe,wireframe=void 0!==_ref$wireframe&&_ref$wireframe,singleGeometry=(0,react.useMemo)((function(){var geometries=[],pointSet=new Set;return data.forEach((function(point){var position=point.position;if(!pointSet.has(position.join(","))){var _geometry=new three_module.SphereGeometry(pointRadius,12,12);_geometry.translate(position[0],position[1],position[2]||0),geometries.push(_geometry),pointSet.add(position.join(","))}})),(0,BufferGeometryUtils.h0)(geometries)}),[data]);return react.createElement("mesh",{geometry:null!=singleGeometry?singleGeometry:void 0,visible:opacity>0},react.createElement("meshBasicMaterial",{opacity,transparent:opacity<1,color,wireframe}))}function LassoSelect(_ref){var children=_ref.children,_ref$lineColor=_ref.lineColor,lineColor=void 0===_ref$lineColor?"#53d7fb":_ref$lineColor,onChange=_ref.onChange,points=_ref.points,enabled=_ref.enabled,_useThree=(0,index_76c68185_esm.z)(),camera=_useThree.camera,raycaster=_useThree.raycaster,gl=_useThree.gl,controls=_useThree.controls,size=_useThree.size,scene=_useThree.scene,selectionShape=(0,react.useRef)(function initializeSelectionShape(){var selectionShape=new three_module.Line;return selectionShape.renderOrder=1,selectionShape.position.z=-.2,selectionShape.depthTest=!1,selectionShape.scale.setScalar(1),selectionShape}()),selectionState=(0,react.useRef)({selectionPoints:[],isDragging:!1,selectionNeedsUpdate:!1,selectionShapeNeedsUpdate:!1});return(0,react.useEffect)((function(){selectionShape.current.material.color.set(lineColor).convertSRGBToLinear(),camera.add(selectionShape.current),scene.add(camera)}),[]),(0,react.useEffect)((function(){var prevX=-1/0,prevY=-1/0,tempVec0=new three_module.Vector2,tempVec1=new three_module.Vector2,tempVec2=new three_module.Vector2;function pointerDown(e){if(enabled){var canvasRect=gl.domElement.getClientRects()[0];prevX=e.clientX-canvasRect.left,prevY=e.clientY-canvasRect.top,selectionState.current.selectionPoints.length=0,selectionState.current.isDragging=!0}}function pointerMove(e){if(selectionState.current.isDragging){var selectionPoints=selectionState.current.selectionPoints,canvasRect=gl.domElement.getClientRects()[0],ex=e.clientX-canvasRect.left,ey=e.clientY-canvasRect.top,nx=ex/canvasRect.width*2-1,ny=-(ey/canvasRect.height*2-1);if(Math.abs(ex-prevX)>=3||Math.abs(ey-prevY)>=3){var i3=3*(selectionPoints.length/3-1),doReplace=!1;if(selectionPoints.length>3)tempVec0.set(selectionPoints[i3-3],selectionPoints[i3-3+1]),tempVec1.set(selectionPoints[i3],selectionPoints[i3+1]),tempVec1.sub(tempVec0).normalize(),tempVec0.set(selectionPoints[i3],selectionPoints[i3+1]),tempVec2.set(nx,ny),tempVec2.sub(tempVec0).normalize(),doReplace=tempVec1.dot(tempVec2)>.99;doReplace?(selectionPoints[i3]=nx,selectionPoints[i3+1]=ny):selectionPoints.push(nx,ny,0),selectionState.current.selectionShapeNeedsUpdate=!0,selectionShape.current.visible=!0,prevX=ex,prevY=ey}}}function pointerUp(){enabled&&selectionState.current.isDragging&&selectionState.current.selectionPoints.length&&(selectionState.current.selectionShapeNeedsUpdate=!0,selectionState.current.selectionNeedsUpdate=!0),selectionShape.current.visible=!1,selectionState.current.isDragging=!1}return gl.domElement.addEventListener("pointerdown",pointerDown,{passive:!0}),document.addEventListener("pointermove",pointerMove,{passive:!0,capture:!0}),document.addEventListener("pointerup",pointerUp,{passive:!0}),function(){gl.domElement.removeEventListener("pointerdown",pointerDown),document.removeEventListener("pointermove",pointerMove),document.removeEventListener("pointerup",pointerUp)}}),[size,raycaster,camera,controls,gl,enabled]),(0,index_76c68185_esm.A)((function(_ref2){var camera=_ref2.camera,_selectionState$curre=selectionState.current,selectionShapeNeedsUpdate=_selectionState$curre.selectionShapeNeedsUpdate,selectionPoints=_selectionState$curre.selectionPoints;if(selectionShapeNeedsUpdate){var ogLength=selectionPoints.length;selectionPoints.push(selectionPoints[0],selectionPoints[1],selectionPoints[2]),selectionShape.current.geometry.setAttribute("position",new three_module.Float32BufferAttribute(selectionPoints,3,!1)),selectionPoints.length=ogLength,selectionShape.current.frustumCulled=!1,selectionState.current.selectionShapeNeedsUpdate=!1}if(selectionState.current.selectionNeedsUpdate&&selectionPoints.length>0&&(selectionState.current.selectionNeedsUpdate=!1,onChange(function updateSelection(_ref3){for(var points=_ref3.points,camera=_ref3.camera,selectionPoints=_ref3.selectionPoints,selection=[],lassoPolygon=[],i=0;i<selectionPoints.length;i+=3)lassoPolygon.push([selectionPoints[i],selectionPoints[i+1]]);var pointVector=new three_module.Vector3;return points.forEach((function(point){var isThreeD=3===point.position.length,pointPosition=isThreeD?point.position:[point.position[0],point.position[1],0];pointVector.fromArray(pointPosition),isThreeD||pointVector.sub(camera.position).applyMatrix4(camera.matrixWorld),pointVector.project(camera),function isPointInsidePolygon(point,polygonPoints){for(var x=point[0],y=point[1],inside=!1,i=0,j=polygonPoints.length-1;i<polygonPoints.length;j=i++){var xi=polygonPoints[i][0],yi=polygonPoints[i][1],xj=polygonPoints[j][0],yj=polygonPoints[j][1];yi>y!=yj>y&&x<(xj-xi)*(y-yi)/(yj-yi)+xi&&(inside=!inside)}return inside}([pointVector.x,pointVector.y],lassoPolygon)&&selection.push(point)})),selection}({points,camera,selectionPoints:selectionState.current.selectionPoints}))),isOrthographicCamera(camera))selectionShape.current.scale.set((camera.right-camera.left)/camera.zoom/2,(camera.top-camera.bottom)/camera.zoom/2,1);else{var yScale=Math.tan(three_module.MathUtils.DEG2RAD*camera.fov/2)*selectionShape.current.position.z;selectionShape.current.scale.set(-yScale*camera.aspect,-yScale,1)}})),react.createElement(react.Fragment,null,children)}var Rainbow11={Purple:"#6e40aa",LightPurple:"#bf3caf",Pink:"#fe4b83",Orange:"#ff7847",LightOrange:"#e2b72f",Lime:"#aff05b",LightGreen:"#52f667",Green:"#1ddfa3",LightBlue:"#23abd8",Blue:"#4c6edb",White:"#ffffff"},ColorSchemes={Discrete2:{PinkLightGreen:[Rainbow11.Pink,Rainbow11.LightGreen],BlueOrange:[Rainbow11.Blue,Rainbow11.Orange],LightBlueOrange:[Rainbow11.LightBlue,Rainbow11.Orange],LightBlueLightOrange:[Rainbow11.LightBlue,Rainbow11.LightOrange],LimePurple:[Rainbow11.Lime,Rainbow11.Purple],LimeLightPurple:[Rainbow11.Lime,Rainbow11.LightPurple],BlueLime:[Rainbow11.Blue,Rainbow11.Lime],LightBlueLime:[Rainbow11.LightBlue,Rainbow11.Lime],WhiteLime:[Rainbow11.White,Rainbow11.Lime],WhiteLightBlue:[Rainbow11.White,Rainbow11.LightBlue],WhiteOrange:[Rainbow11.White,Rainbow11.Orange]}}},"./stories/components/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{mc:()=>Container,Ur:()=>ControlPanel});var react=__webpack_require__("./node_modules/react/index.js");function Toolbar(_ref){var _ref$selectedTool=_ref.selectedTool,selectedTool=void 0===_ref$selectedTool?"move":_ref$selectedTool,onToolChange=_ref.onToolChange,_onChange=function onChange(e){onToolChange&&onToolChange(e.currentTarget.value)};return react.createElement("div",{style:{display:"flex",alignItems:"center"}},react.createElement("div",null,react.createElement("input",{type:"radio",id:"move",name:"tool",value:"move",onChange:function onChange(e){_onChange(e)},checked:"move"===selectedTool}),react.createElement("label",{htmlFor:"move"},"Move")),react.createElement("div",null,react.createElement("input",{type:"radio",id:"select",name:"tool",value:"select",onChange:function onChange(e){_onChange(e)},checked:"select"===selectedTool}),react.createElement("label",{htmlFor:"select"},"Select")))}var _excluded=["children","showToolbar","width","height"];function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function Container(_ref){var children=_ref.children,_ref$showToolbar=_ref.showToolbar,showToolbar=void 0===_ref$showToolbar||_ref$showToolbar,_ref$width=_ref.width,width=void 0===_ref$width?1200:_ref$width,_ref$height=_ref.height,height=void 0===_ref$height?800:_ref$height,toolbarProps=_objectWithoutProperties(_ref,_excluded);return react.createElement("section",null,showToolbar?react.createElement(Toolbar,toolbarProps):null,react.createElement("div",{style:{width,height,backgroundColor:"#151616"}},children))}function ControlPanel(_ref){var children=_ref.children;return react.createElement("section",{style:{position:"absolute",right:12,top:48,background:"#5c5c5c",borderRadius:8,border:"1px solid white",padding:12,minWidth:300,color:"white"}},children)}}}]);